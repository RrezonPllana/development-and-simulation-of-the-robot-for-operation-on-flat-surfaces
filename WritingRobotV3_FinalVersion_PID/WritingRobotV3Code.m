writing_robot_3D_model_url='https://cad.onshape.com/documents/bfcb141b5563edffb66162f3/w/27626b9b2e22ca301d597735/e/9f8e18de84c3619a9ba321f2';

writing_robot_3D_xml_file=smexportonshape(writing_robot_3D_model_url); % download the robotic arm model designed in onshape
smimport(writing_robot_3D_xml_file); % import robot arm to simulink


writing_robot_rigid_body = importrobot('WritingRobot')

showdetails(writing_robot_rigid_body)
show(writing_robot_rigid_body)
forward_kin=homeConfiguration(writing_robot_rigid_body)


% waypoints = [0.24 0.32 0.7;...
%             0.24 0.32 0.6;...
%             0.24 0.32 0.5;...
%             0.24 0.32 0.4;...
%             0.24 0.32 0.3;...
%             0.24 0.4 0.3;...
%             0.24 0.5 0.3;...
%             0.24 0.6 0.3;...
%             0.24 0.7 0.3]

% for trapezoidal func trajectory
waypoints_L = [0.2 0.32 0.7;...
            0.2 0.32 0.3;...
            0.2 0.7 0.3] 
        
waypoint_L_T=transpose(waypoints_L)

waypoints_Visuals_L = [0.2 0.32 0.7;...
            0.2 0.32 0.6;...
            0.2 0.32 0.5;...
            0.2 0.32 0.4;...
            0.2 0.32 0.3;...
            0.2 0.4 0.3;...
            0.2 0.5 0.3;...
            0.2 0.6 0.3;...
            0.2 0.7 0.3] 
        


FIEK_waypoints=[0.2 0.42 0.7; ... % F
                0.2 0.32 0.7; ...
                0.2 0.32 0.5; ...
                0.18 0.32 0.5; ... % pen up
                0.18 0.32 0.65; ...
                0.2 0.32 0.65; ... % pen down
                0.2 0.38 0.65;...
                0.18 0.38 0.65; ... % pen up
                0.18 0.48 0.7; ... % next letter I
                0.2  0.48 0.7; ... % pen down
                0.2  0.48 0.5; ... 
                0.18 0.48 0.5; ... % pen up
                0.18 0.62 0.7; ... % next letter E
                0.2  0.62 0.7; ... % pen down
                0.2  0.52 0.7;...
                0.2 0.52 0.5;  ... 
                0.2 0.62 0.5; ...
                0.18 0.62 0.5; ... % pen up
                0.18 0.52 0.6; ...
                0.2 0.52 0.6; ... % pen down
                0.2 0.62 0.6; ...
                0.18 0.62 0.6; ... % pen up to last letter K
                0.18 0.68 0.7; ...
                0.2 0.68 0.7; ...  % pen down
                0.2 0.68 0.5; ...
                0.18 0.68 0.5; ... % pen up
                0.18 0.78 0.7; ...
                0.2 0.78 0.7; ... % pen down
                0.2 0.68 0.6; ... 
                0.2 0.78 0.5;
];
            
 FIEK_waypoints_T = transpose(FIEK_waypoints)
 
 
 FIEK_waypoints_path_visuals = [0.2 0.42 0.7; ... % F
                0.2 0.38 0.7; ...
                0.2 0.36 0.7; ...
                0.2 0.32 0.7; ...
                0.2 0.32 0.65; ...
                0.2 0.32 0.6; ...
                0.2 0.32 0.55; ...
                0.2 0.32 0.5; ...
                0.18 0.32 0.5; ... % pen up
                0.18 0.32 0.55; ...
                0.18 0.32 0.6; ...
                0.18 0.32 0.65; ...
                0.2 0.32 0.65; ... % pen down
                0.2 0.36 0.65; ...
                0.2 0.38 0.65;...
                0.21 0.38 0.65;...
                0.18 0.38 0.65; ... % pen up
                0.18 0.44 0.67; ... % pen up
                0.18 0.48 0.7; ... % next letter I
                0.2  0.48 0.7; ... % pen down
                0.2  0.48 0.65; ...
                0.2  0.48 0.6; ...
                0.2  0.48 0.55; ...
                0.2  0.48 0.5; ... 
                0.18 0.48 0.5; ... % pen up
                0.18 0.62 0.7; ... % next letter E
                0.2  0.62 0.7; ... % pen down
                0.2  0.58 0.7;...
                0.2  0.54 0.7;...
                0.2  0.52 0.7;...
                0.2  0.52 0.65;...
                0.2  0.52 0.6;...
                0.2 0.52 0.5;  ... 
                0.2 0.62 0.5; ...
                0.18 0.62 0.5; ... % pen up
                0.18 0.58 0.5; ...
                0.18 0.54 0.5; ...
                0.18 0.52 0.6; ...
                0.2 0.52 0.6; ... % pen down
                0.2 0.54 0.6; ...
                0.2 0.56 0.6; ...
                0.2 0.58 0.6; ...
                0.2 0.62 0.6; ...
                0.18 0.62 0.6; ... % pen up to last letter K
                0.18 0.68 0.7; ...
                0.2 0.68 0.7; ...  % pen down
                0.2 0.68 0.65; ...
                0.2 0.68 0.6; ...
                0.2 0.68 0.55; ...
                0.2 0.68 0.5; ...
                0.18 0.68 0.5; ... % pen up
                0.18 0.78 0.7; ...
                0.2 0.78 0.7; ... % pen down
                0.2 0.72 0.65; ...
                0.2 0.68 0.6; ... 
                0.2 0.72 0.55; ...
                0.2 0.78 0.5;
];

 FIEK_waypoints_path_visuals_better = [0.2 0.42 0.7; ... % F
                0.2 0.38 0.7; ...
                0.2 0.36 0.7; ...
                0.2 0.32 0.7; ...
                0.2 0.32 0.65; ...
                0.2 0.32 0.6; ...
                0.2 0.32 0.55; ...
                0.2 0.32 0.5; ...
                0.18 0.32 0.5; ... % pen up
                0.18 0.32 0.55; ...
                0.18 0.32 0.6; ...
                0.18 0.32 0.65; ...
                0.2 0.32 0.65; ... % pen down
                0.2 0.36 0.65; ...
                0.2 0.38 0.65;...
                0.21 0.38 0.65;...
                0.18 0.38 0.65; ... % pen up
                0.18 0.44 0.67; ... % pen up
                0.18 0.48 0.7; ... % next letter I
                0.2  0.48 0.7; ... % pen down
                0.2  0.48 0.65; ...
                0.2  0.48 0.6; ...
                0.2  0.48 0.55; ...
                0.2  0.48 0.5; ... 
                0.18 0.48 0.5; ... % pen up
                0.18 0.62 0.7; ... % next letter E
                0.2  0.62 0.7; ... % pen down
                0.2  0.58 0.7;...
                0.2  0.54 0.7;...
                0.2  0.52 0.7;...
                0.2  0.52 0.65;...
                0.2  0.52 0.6;...
                0.2 0.52 0.5;  ... 
                0.2 0.62 0.5; ...
                0.18 0.62 0.5; ... % pen up
                0.18 0.58 0.5; ...
                0.18 0.54 0.5; ...
                0.18 0.52 0.6; ...
                0.2 0.52 0.6; ... % pen down
                0.2 0.54 0.6; ...
                0.2 0.56 0.6; ...
                0.2 0.58 0.6; ...
                0.2 0.62 0.6; ...
                0.18 0.62 0.6; ... % pen up to last letter K
                0.18 0.68 0.7; ...
                0.2 0.68 0.7; ...  % pen down
                0.2 0.68 0.65; ...
                0.2 0.68 0.6; ...
                0.2 0.68 0.55; ...
                0.2 0.68 0.5; ...
                0.18 0.68 0.5; ... % pen up
                0.18 0.72 0.6; ... % pen up
                0.18 0.78 0.7; ...
                0.2 0.78 0.7; ... % pen down
                0.2 0.72 0.65; ...
                0.2 0.68 0.6; ... 
                0.2 0.72 0.55; ...
                0.2 0.78 0.5;
];